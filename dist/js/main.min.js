const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),header=document.querySelector(".header"),imageBody=document.querySelectorAll(".image-body, figure");let typeSplit,smoother;function runSplit(){typeSplit=new SplitType(".header__nav--list > li > a, .split-text",{types:"lines"}),Array.from(typeSplit.lines).forEach(e=>{let t;t=e.cloneNode(!0),t.classList.remove("line"),t.classList.add("line-body"),e.innerHTML="",e.append(t)}),document.querySelectorAll(".header__nav--list > li > a, .split-text").forEach(e=>{e.style.opacity=1})}imageBody.forEach(e=>{const t=e.querySelector("img"),r=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==r.position&&(e.style.paddingTop=Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")}),gsap.registerPlugin(ScrollTrigger,ScrollSmoother),document.querySelectorAll(".header__nav--list > li > a, .split-text").forEach(e=>{e.style.opacity=0});class LoopingElement{constructor(e,t,r,i){this.element=e,this.currentTranslation=t,this.speed=r,this.direction=!0,this.scrollTop=0,this.metric=100,this.lerp={current:this.currentTranslation,target:this.currentTranslation,factor:.2},this.events(),this.render(),this.go=i}events(){window.addEventListener("scroll",e=>{let t=window.pageYOffset||document.documentElement.scrollTop;this.go?(this.direction=!0,this.lerp.target+=4*this.speed):(this.direction=!1,this.lerp.target-=4*this.speed),this.scrollTop=t<=0?0:t})}lerpFunc(e,t,r){this.lerp.current=e*(1-r)+t*r}goForward(){this.lerp.target+=this.speed,this.lerp.target>this.metric&&(this.lerp.current-=2*this.metric,this.lerp.target-=2*this.metric)}goBackward(){this.lerp.target-=this.speed,this.lerp.target<-this.metric&&(this.lerp.current-=2*-this.metric,this.lerp.target-=2*-this.metric)}animate(){this.direction?this.goForward():this.goBackward(),this.lerpFunc(this.lerp.current,this.lerp.target,this.lerp.factor),this.element.style.setProperty("--x",this.lerp.current+"%")}render(){this.animate(),window.requestAnimationFrame(()=>this.render())}}if(window.addEventListener("load",(function(e){runSplit();const t=gsap.matchMedia();t.add("(min-width: 1000px)",()=>{smoother=ScrollSmoother.create({smooth:1.5,effects:!0});document.querySelectorAll(".parallax-image").forEach(e=>{gsap.set(e,{transform:"translate3d(0,-200px,0)",height:"calc(100% + 400px)",top:"-200px"}),gsap.to(e,{scrollTrigger:{scrub:!0,trigger:e.closest(".parallax-image-wrapper"),start:"top bottom",end:"bottom top"},transform:"translate3d(0,200px,0)",ease:"none"})})}),t.add("(max-width: 1000px)",()=>{gsap.set(".parallax-image",{transform:"translate3d(0,-100px,0)",height:"calc(100% + 200px)",top:"-100px"}),ScrollTrigger.config({ignoreMobileResize:!0}),gsap.to(".parallax-image",{scrollTrigger:{scrub:!0,trigger:".parallax-image-wrapper",start:"top bottom",end:"bottom top",ignoreMobileResize:!0},transform:"translate3d(0,100px,0)",ease:"none"})});document.querySelectorAll(".anim-section").forEach(e=>{let t=gsap.timeline({scrollTrigger:{trigger:e,start:"top center"}});const r=e.querySelectorAll(".anim-text.split-text .line-body");r.length&&t.to(r,{transform:"translate3d(0,0,0)",duration:1,delay:.2,stagger:.15,ease:"power3.out"});const i=e.querySelectorAll(".anim-text-2.split-text .line-body");i.length&&t.to(i,{transform:"translate3d(0,0,0)",duration:.5,stagger:.1,ease:"power3.out"},"-=1.2");e.querySelectorAll(".fade-in").forEach(e=>{t.to(e,{duration:1,opacity:1},"-=0.5")});e.querySelectorAll(".fade-down").forEach(e=>{t.to(e,{duration:1,opacity:1,transform:"translate3d(0,0,0)"},"-=0.5")})}),document.querySelectorAll(".marquee__item").forEach(e=>{let t=e.querySelectorAll(".marquee__item--element"),r=Number(e.dataset.marqueeSpeed),i="false"!=e.dataset.marqueeGoNext;new LoopingElement(t[0],0,r,i),new LoopingElement(t[1],-100,r,i)});document.querySelectorAll("[data-append-marquee]").forEach(e=>{const t=document.createElement("div");t.innerHTML=`<span>${e.dataset.appendMarquee}</span><span>${e.dataset.appendMarquee}</span>`,t.classList.add("min-marquee"),t.classList.add("text"),e.append(t)});const r=document.querySelector(".blog__cursor"),i=document.querySelectorAll(".blog__item"),o=document.querySelector(".blog__wrapper");let a=gsap.quickTo(r,"x",{duration:.3,ease:"power3"}),s=gsap.quickTo(r,"y",{duration:.3,ease:"power3"});o.addEventListener("pointermove",(function(e){a(e.clientX),s(e.clientY)})),o.addEventListener("pointerenter",(function(e){gsap.set(r,{x:e.clientX,duration:0,ease:"power3"}),gsap.set(r,{y:e.clientY,duration:0,ease:"power3"}),r.classList.add("_hover")})),o.addEventListener("pointerleave",(function(e){r.classList.remove("_hover")})),setTimeout(()=>{},200),i.forEach((e,t)=>{e.addEventListener("pointerenter",(function(i){r.dataset.index=t,e.classList.add("_hover")})),e.addEventListener("pointerleave",(function(e){}))}),setTimeout(()=>{ScrollTrigger.refresh()},100)})),document.querySelector(".process__bg-slider")&&document.querySelector(".process__slider")){const e=new Splide(".process__slider",{type:"fade",speed:1e3,pagination:!1,rewind:!0,arrows:!0});e.on("mounted",(function(t){setTimeout(()=>{gsap.to(e.root.querySelectorAll(".splide__slide.is-active .title.split-text .line-body"),{scrollTrigger:{trigger:e.root,start:"top bottom"},transform:"translate3d(0,0,0.0001px)",duration:.7,stagger:.07}),gsap.to(e.root.querySelectorAll(".splide__slide.is-active .text.split-text .line-body"),{scrollTrigger:{trigger:e.root,start:"top bottom"},transform:"translate3d(0,0,0.0001px)",duration:.7,delay:.5,stagger:.07}),gsap.to(e.root.querySelector(".splide__slide.is-active .min-marquee"),{scrollTrigger:{trigger:e.root,start:"top bottom"},opacity:1,duration:.7,delay:.7})},500)})),e.mount();const t=document.querySelector(".process__bg-slider--canvas"),r=t.getContext("2d"),i=document.querySelectorAll(".process__bg-slider--image"),o=[];function drawImageProp(e,t,r,i,o,a,s,n){2===arguments.length&&(r=i=0,o=e.canvas.width,a=e.canvas.height),(s="number"==typeof s?s:.5)<0&&(s=0),(n="number"==typeof n?n:.5)<0&&(n=0),s>1&&(s=1),n>1&&(n=1);var l,d,c,p,h=t.width,g=t.height,u=Math.min(o/h,a/g),m=h*u,w=g*u,y=1;m<o&&(y=o/m),Math.abs(y-1)<1e-14&&w<a&&(y=a/w),(l=(h-(c=h/((m*=y)/o)))*s)<0&&(l=0),(d=(g-(p=g/((w*=y)/a)))*n)<0&&(d=0),c>h&&(c=h),p>g&&(p=g),e.drawImage(t,l,d,c,p,r,i,o,a)}function checkDirection(e,t,r){return e>t&&t!=r&&0!=e?0==t&&e==r?"prev":"next":t==r&&0==e?"next":"prev"}i.forEach(e=>{const t=new Image;o.push(t)});let a=window.innerWidth;window.addEventListener("resize",(function(e){a!=window.innerWidth&&(a=window.innerWidth,t.width=t.offsetWidth,t.heigh=t.offsetHeight)})),e.on("moved",(function(i,a){setTimeout(()=>{if(t.width=t.offsetWidth,t.height=t.offsetHeight,"next"==checkDirection(i,a,e.length-1)){let e=Math.max(t.width,t.height);function s(s){r.clearRect(0,0,t.width,t.height),r.save(),drawImageProp(r,o[a],s.imagePos,0,t.width,t.height),r.fillStyle=`rgba(0,0,0,${s.imageOpacity})`,r.rect(0,0,t.width,t.height),r.fill(),r.beginPath(),r.arc(s.clipPosX,t.height/2,e,0,2*Math.PI),r.clip(),drawImageProp(r,o[i],0,0,t.width,t.height),r.restore()}let n={clipPosX:-e,imagePos:0,imageOpacity:0};s(n),gsap.to(n,{imageOpacity:.5,duration:1,delay:.3,ease:"power4.inOut"}),windowSize>550&&gsap.to(n,{duration:1.5,imagePos:t.width/3,delay:.3,ease:"power4.inOut"}),gsap.to(n,{clipPosX:window.innerWidth/14,duration:2,ease:"power4.inOut",onUpdate:function(e){s(n)}})}else{let e=Math.max(t.width,t.height);function s(s){r.clearRect(0,0,t.offsetWidth,t.offsetHeight),r.save(),drawImageProp(r,o[a],s.imagePos,0,t.width,t.height),r.fillStyle=`rgba(0,0,0,${s.imageOpacity})`,r.rect(0,0,t.width,t.height),r.fill(),r.beginPath(),r.arc(s.clipPosX,t.height/2,e,0,2*Math.PI),r.clip(),drawImageProp(r,o[i],0,0,t.width,t.height),r.restore()}let n={clipPosX:e+t.width,imagePos:0,imageOpacity:0};gsap.to(n,{imageOpacity:.5,duration:1,delay:.3,ease:"power4.inOut"}),windowSize>550&&gsap.to(n,{duration:1.5,imagePos:-t.width/3,delay:.3,ease:"power4.inOut"}),gsap.to(n,{clipPosX:t.width-window.innerWidth/14,duration:2,ease:"power4.inOut",onUpdate:function(e){s(n)}})}setTimeout(()=>{window.innerWidth>550?(gsap.to(e.root.querySelectorAll(".splide__slide.is-active .title.split-text .line-body"),{transform:"translate3d(0,0,0.0001px)",duration:.7,stagger:.07}),gsap.to(e.root.querySelectorAll(".splide__slide.is-active .text.split-text .line-body"),{transform:"translate3d(0,0,0.0001px)",duration:.7,delay:.5,stagger:.07}),gsap.to(e.root.querySelector(".splide__slide.is-active .min-marquee"),{opacity:1,duration:.7,delay:.7}),gsap.set(e.root.querySelectorAll(".splide__slide:not(.is-active) .title.split-text .line-body, .splide__slide:not(.is-active) .text.split-text .line-body"),{transform:"translate3d(0,120%,0.0001px)"})):gsap.to(e.root.querySelector(".splide__slide.is-active .min-marquee"),{opacity:1,duration:.7,delay:.3}),gsap.set(e.root.querySelector(".splide__slide:not(.is-active) .min-marquee"),{opacity:0})},700)},0)})),o[0].addEventListener("load",(function(e){setTimeout(()=>{t.width=t.offsetWidth,t.height=t.offsetHeight,r.clearRect(0,0,t.width,t.height),r.save(),drawImageProp(r,o[0],0,0,t.width,t.height),r.restore()},500)})),i.forEach((e,t)=>{o[t].src=e.dataset.url})}body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}const r=t(".header__burger");r&&(menu.forEach(e=>{e.classList.toggle("_mob-menu-active")}),r.classList.contains("_mob-menu-active")?setTimeout(()=>{gsap.to(".header__nav--list > li > a .line-body",{transform:"translate3d(0,0,0)",duration:1,stagger:.1,ease:"power4.out"})},100):setTimeout(()=>{r.classList.contains("_mob-menu-active")||gsap.set(".header__nav--list > li > a .line-body",{transform:"translate3d(0,110%,0)"})},300));const i=t(".misson__accordion--target");if(i){const e=i.closest(".misson__accordion--block"),t=e.querySelector(".misson__accordion--content"),r=t.querySelectorAll(".split-text .line-body");e.classList.contains("_active")?(e.classList.remove("_active"),smoother&&smoother.paused(!0),gsap.to(t,{height:0,marginTop:0,ease:"power4.out",onComplete:function(t){windowSize>=1e3&&(ScrollTrigger.refresh(),setTimeout(()=>{smoother&&smoother.paused(!1)},200)),e.classList.contains("_active")||gsap.set(r,{transform:"translate3d(0,120%,0.0002px)"})}})):(e.classList.add("_active"),smoother&&smoother.paused(!0),gsap.fromTo(t,{height:0,marginTop:0,ease:"circ.out"},{height:"auto",marginTop:windowSize>=1e3?"1.458333vw":"14px",ease:"power4.out",onComplete:function(e){windowSize>=1e3&&ScrollTrigger.refresh(),setTimeout(()=>{smoother&&smoother.paused(!1)},200)}}),gsap.to(r,{transform:"translate3d(0,0,0.0002px)",duration:.3,stagger:.05,ease:"power3.out"}))}}));let windowSize=0;function resize(){html.style.setProperty("--height-header",header.offsetHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize=window.innerWidth}resize(),window.addEventListener("resize",resize);