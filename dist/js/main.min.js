const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),header=document.querySelector(".header"),imageBody=document.querySelectorAll(".image-body, figure");let typeSplit,smoother;function runSplit(){typeSplit=new SplitType(".header__nav--list > li > a, .split-text",{types:"lines"}),Array.from(typeSplit.lines).forEach(e=>{let t;t=e.cloneNode(!0),t.classList.remove("line"),t.classList.add("line-body"),e.innerHTML="",e.append(t)}),document.querySelectorAll(".header__nav--list > li > a, .split-text").forEach(e=>{e.style.opacity=1})}imageBody.forEach(e=>{const t=e.querySelector("img"),r=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==r.position&&(e.style.paddingTop=Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")}),gsap.registerPlugin(ScrollTrigger,ScrollSmoother),gsap.registerPlugin(ScrollTrigger),document.querySelectorAll(".header__nav--list > li > a, .split-text").forEach(e=>{e.style.opacity=0});class LoopingElement{constructor(e,t,r,o){this.element=e,this.currentTranslation=t,this.speed=r,this.direction=!0,this.scrollTop=0,this.metric=100,this.lerp={current:this.currentTranslation,target:this.currentTranslation,factor:.2},this.events(),this.render(),this.go=o}events(){window.addEventListener("scroll",e=>{let t=window.pageYOffset||document.documentElement.scrollTop;this.go?(this.direction=!0,this.lerp.target+=4*this.speed):(this.direction=!1,this.lerp.target-=4*this.speed),this.scrollTop=t<=0?0:t})}lerpFunc(e,t,r){this.lerp.current=e*(1-r)+t*r}goForward(){this.lerp.target+=this.speed,this.lerp.target>this.metric&&(this.lerp.current-=2*this.metric,this.lerp.target-=2*this.metric)}goBackward(){this.lerp.target-=this.speed,this.lerp.target<-this.metric&&(this.lerp.current-=2*-this.metric,this.lerp.target-=2*-this.metric)}animate(){this.direction?this.goForward():this.goBackward(),this.lerpFunc(this.lerp.current,this.lerp.target,this.lerp.factor),this.element.style.setProperty("--x",this.lerp.current+"%")}render(){this.animate(),window.requestAnimationFrame(()=>this.render())}}window.addEventListener("load",(function(e){runSplit();const t=gsap.matchMedia();t.add("(min-width: 1000px)",()=>{smoother=ScrollSmoother.create({smooth:1.5,effects:!0}),gsap.set(".parallax-image",{transform:"translate3d(0,-200px,0)",height:"calc(100% + 400px)",top:"-200px"}),gsap.to(".parallax-image",{scrollTrigger:{scrub:!0,trigger:".parallax-image-wrapper",start:"top bottom",end:"bottom top"},transform:"translate3d(0,200px,0)",ease:"none"})}),t.add("(max-width: 1000px)",()=>{gsap.set(".parallax-image",{transform:"translate3d(0,-100px,0)",height:"calc(100% + 200px)",top:"-100px"}),ScrollTrigger.config({ignoreMobileResize:!0}),gsap.to(".parallax-image",{scrollTrigger:{scrub:!0,trigger:".parallax-image-wrapper",start:"top bottom",end:"bottom top",ignoreMobileResize:!0},transform:"translate3d(0,100px,0)",ease:"none"})});document.querySelectorAll(".anim-section").forEach(e=>{let t=gsap.timeline({scrollTrigger:{trigger:e,start:"top center"}});const r=e.querySelectorAll(".anim-text.split-text .line-body");t.to(r,{transform:"translate3d(0,0,0)",duration:1,delay:.2,stagger:.15,ease:"power3.out"});const o=e.querySelectorAll(".anim-text-2.split-text .line-body");t.to(o,{transform:"translate3d(0,0,0)",duration:.5,stagger:.1,ease:"power3.out"},"-=1.2");e.querySelectorAll(".fade-in").forEach(e=>{t.to(e,{duration:1,opacity:1},"-=0.5")});e.querySelectorAll(".fade-down").forEach(e=>{t.to(e,{duration:1,opacity:1,transform:"translate3d(0,0,0)"},"-=0.5")})}),document.querySelectorAll(".marquee__item").forEach(e=>{let t=e.querySelectorAll(".marquee__item--element"),r=Number(e.dataset.marqueeSpeed),o="false"!=e.dataset.marqueeGoNext;new LoopingElement(t[0],0,r,o),new LoopingElement(t[1],-100,r,o)}),setTimeout(()=>{ScrollTrigger.refresh()},100)})),body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}const r=t(".header__burger");r&&(menu.forEach(e=>{e.classList.toggle("_mob-menu-active")}),r.classList.contains("_mob-menu-active")?setTimeout(()=>{gsap.to(".header__nav--list > li > a .line-body",{transform:"translate3d(0,0,0)",duration:1,stagger:.1,ease:"power4.out"})},100):setTimeout(()=>{r.classList.contains("_mob-menu-active")||gsap.set(".header__nav--list > li > a .line-body",{transform:"translate3d(0,110%,0)"})},300));const o=t(".misson__accordion--target");if(o){const e=o.closest(".misson__accordion--block"),t=e.querySelector(".misson__accordion--content"),r=t.querySelectorAll(".split-text .line-body");e.classList.contains("_active")?(e.classList.remove("_active"),smoother&&smoother.paused(!0),gsap.to(t,{height:0,marginTop:0,ease:"power4.out",onComplete:function(t){windowSize>=1e3&&(ScrollTrigger.refresh(),setTimeout(()=>{smoother&&smoother.paused(!1)},200)),e.classList.contains("_active")||gsap.set(r,{transform:"translate3d(0,120%,0.0002px)"})}})):(e.classList.add("_active"),smoother&&smoother.paused(!0),gsap.fromTo(t,{height:0,marginTop:0,ease:"circ.out"},{height:"auto",marginTop:windowSize>=1e3?"1.458333vw":"14px",ease:"power4.out",onComplete:function(e){windowSize>=1e3&&ScrollTrigger.refresh(),setTimeout(()=>{smoother&&smoother.paused(!1)},200)}}),gsap.to(r,{transform:"translate3d(0,0,0.0002px)",duration:.3,stagger:.05,ease:"power3.out"}))}}));let windowSize=0;function resize(){html.style.setProperty("--height-header",header.offsetHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize=window.innerWidth}resize(),window.addEventListener("resize",resize);