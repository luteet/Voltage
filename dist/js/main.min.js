const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),header=document.querySelector(".header"),getDeviceType=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},imageBody=document.querySelectorAll(".image-body, figure");let typeSplit,smoother;function runSplit(){typeSplit=new SplitType(".header__nav--list > li > a, .split-text",{types:"lines"}),Array.from(typeSplit.lines).forEach(e=>{let t;t=e.cloneNode(!0),t.classList.remove("line"),t.classList.add("line-body"),e.innerHTML="",e.append(t)}),document.querySelectorAll(".header__nav--list > li > a, .split-text").forEach(e=>{e.style.opacity=1})}imageBody.forEach(e=>{const t=e.querySelector("img"),o=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==o.position&&(e.style.paddingTop=Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")}),gsap.registerPlugin(ScrollTrigger,ScrollSmoother),document.querySelectorAll(".header__nav--list > li > a, .split-text").forEach(e=>{e.style.opacity=0});class LoopingElement{constructor(e,t,o,i){this.element=e,this.currentTranslation=t,this.speed=o,this.direction=!0,this.scrollTop=0,this.metric=100,this.lerp={current:this.currentTranslation,target:this.currentTranslation,factor:.2},this.events(),this.render(),this.go=i}events(){window.addEventListener("scroll",e=>{let t=window.pageYOffset||document.documentElement.scrollTop;this.go?(this.direction=!0,this.lerp.target+=4*this.speed):(this.direction=!1,this.lerp.target-=4*this.speed),this.scrollTop=t<=0?0:t})}lerpFunc(e,t,o){this.lerp.current=e*(1-o)+t*o}goForward(){this.lerp.target+=this.speed,this.lerp.target>this.metric&&(this.lerp.current-=2*this.metric,this.lerp.target-=2*this.metric)}goBackward(){this.lerp.target-=this.speed,this.lerp.target<-this.metric&&(this.lerp.current-=2*-this.metric,this.lerp.target-=2*-this.metric)}animate(){this.direction?this.goForward():this.goBackward(),this.lerpFunc(this.lerp.current,this.lerp.target,this.lerp.factor),this.element.style.setProperty("--x",this.lerp.current+"%")}render(){this.animate(),window.requestAnimationFrame(()=>this.render())}}const preloader=document.querySelector(".preloader"),preloaderBlock=preloader.querySelector(".preloader__block"),preloaderProgress=preloader.querySelector(".preloader__progress--value"),progressLoaded=preloader.querySelector(".preloader__loaded");let preloadLoadingValue={valueNumber:0},preloadTimeline=gsap.timeline(),preloadTimelineValue=gsap.timeline();document.addEventListener("DOMContentLoaded",(function(){gsap.set(preloaderProgress,{transform:"scaleX(0)"}),gsap.to(preloaderBlock,{opacity:1}),preloadTimeline.to(preloaderProgress,{transform:"scaleX(0.99)",duration:3,delay:.2}),preloadTimelineValue.to(preloadLoadingValue,{valueNumber:99,duration:3,delay:.2,onUpdate:function(){progressLoaded.textContent=Math.round(preloadLoadingValue.valueNumber)}})})),window.addEventListener("load",(function(e){runSplit();const t=gsap.matchMedia();t.add("(min-width: 1000px)",()=>{smoother=ScrollSmoother.create({smooth:1.2,effects:!0})}),setTimeout(()=>{preloadTimeline.to(preloaderProgress,{transform:"scaleX(1)",duration:.2,onComplete:function(){preloaderBlock.classList.add("_hidden"),setTimeout(()=>{gsap.to(preloader,{opacity:0,duration:.4,onComplete:function(){preloader.remove()}})},400),setTimeout(()=>{t.add("(min-width: 1000px)",()=>{document.querySelectorAll(".parallax-image").forEach(e=>{gsap.set(e,{transform:"translate3d(0,-200px,0)",height:"calc(100% + 400px)",top:"-200px"}),gsap.to(e,{scrollTrigger:{scrub:!0,trigger:e.closest(".parallax-image-wrapper"),start:"top bottom",end:"bottom top"},transform:"translate3d(0,200px,0)",ease:"none"})})}),t.add("(max-width: 1000px)",()=>{gsap.set(".parallax-image",{transform:"translate3d(0,-100px,0)",height:"calc(100% + 200px)",top:"-100px"}),ScrollTrigger.config({ignoreMobileResize:!0}),gsap.to(".parallax-image",{scrollTrigger:{scrub:!0,trigger:".parallax-image-wrapper",start:"top bottom",end:"bottom top",ignoreMobileResize:!0},transform:"translate3d(0,100px,0)",ease:"none"})});document.querySelectorAll(".anim-section").forEach(e=>{let t=gsap.timeline({scrollTrigger:{trigger:e,start:"top center"}});const o=e.querySelectorAll(".anim-text.split-text .line-body");o.length&&t.to(o,{transform:"translate3d(0,0,0)",duration:1,delay:.2,stagger:.15,ease:"power3.out"});const i=e.querySelectorAll(".anim-text-2.split-text .line-body");i.length&&t.to(i,{transform:"translate3d(0,0,0)",duration:.5,stagger:.1,ease:"power3.out"},"-=1.2");e.querySelectorAll(".fade-in").forEach(e=>{t.to(e,{duration:1,opacity:1,onComplete:function(){e.classList.add("_animated")}},"-=0.5")});e.querySelectorAll(".fade-down").forEach(e=>{t.to(e,{duration:1,opacity:1,transform:"translate3d(0,0,0)"},"-=0.5")})}),document.querySelectorAll(".marquee__item").forEach(e=>{let t=e.querySelectorAll(".marquee__item--element"),o=Number(e.dataset.marqueeSpeed),i="false"!=e.dataset.marqueeGoNext;new LoopingElement(t[0],0,o,i),new LoopingElement(t[1],-100,o,i)});document.querySelectorAll("[data-append-marquee]").forEach(e=>{const t=document.createElement("div");t.innerHTML=`<span>${e.dataset.appendMarquee}</span><span>${e.dataset.appendMarquee}</span>`,t.classList.add("min-marquee"),t.classList.add("text"),e.append(t)});const e=document.querySelector(".blog__cursor"),o=document.querySelectorAll(".blog__item"),i=document.querySelector(".blog__wrapper");document.querySelector(".blog__list");let r=gsap.quickTo(e,"x",{duration:.3,ease:"power3"}),s=gsap.quickTo(e,"y",{duration:.3,ease:"power3"});if(i.addEventListener("pointermove",(function(e){r(e.clientX),s(e.clientY)})),i.addEventListener("pointerenter",(function(t){gsap.set(e,{x:t.clientX,duration:0,ease:"power3"}),gsap.set(e,{y:t.clientY,duration:0,ease:"power3"}),e.classList.add("_hover")})),i.addEventListener("pointerleave",(function(t){e.classList.remove("_hover")})),o.forEach((t,o)=>{t.addEventListener("pointerenter",(function(i){e.dataset.index=o,t.classList.add("_hover")}))}),document.querySelector(".process__bg-slider")&&document.querySelector(".process__slider")){const e=new Splide(".process__slider",{type:"fade",speed:600,waitForTransition:!0,pagination:!1,rewind:!0,arrows:!1,drag:!1});e.on("mounted",(function(t){setTimeout(()=>{gsap.to(e.root.querySelectorAll(".splide__slide.is-active .title.split-text .line-body"),{scrollTrigger:{trigger:e.root,start:"top bottom"},transform:"translate3d(0,0,0.0001px)",duration:.7,stagger:.07}),gsap.to(e.root.querySelectorAll(".splide__slide.is-active .text.split-text .line-body"),{scrollTrigger:{trigger:e.root,start:"top bottom"},transform:"translate3d(0,0,0.0001px)",duration:.7,delay:.5,stagger:.07}),gsap.to(e.root.querySelector(".splide__slide.is-active .min-marquee"),{scrollTrigger:{trigger:e.root,start:"top bottom"},opacity:1,duration:.7,delay:.7})},500)})),e.mount();const t=document.querySelector(".process__bg-slider--canvas"),o=t.getContext("2d"),i=document.querySelectorAll(".process__bg-slider--image"),r=[];function a(e,t,o,i,r,s,a,n){2===arguments.length&&(o=i=0,r=e.canvas.width,s=e.canvas.height),(a="number"==typeof a?a:.5)<0&&(a=0),(n="number"==typeof n?n:.5)<0&&(n=0),a>1&&(a=1),n>1&&(n=1);var l,d,c,p,h=t.width,u=t.height,g=Math.min(r/h,s/u),m=h*g,f=u*g,w=1;m<r&&(w=r/m),Math.abs(w-1)<1e-14&&f<s&&(w=s/f),(l=(h-(c=h/((m*=w)/r)))*a)<0&&(l=0),(d=(u-(p=u/((f*=w)/s)))*n)<0&&(d=0),c>h&&(c=h),p>u&&(p=u),e.drawImage(t,l,d,c,p,o,i,r,s)}i.forEach(e=>{const t=new Image;r.push(t)});let s=window.innerWidth;window.addEventListener("resize",(function(i){s!=window.innerWidth&&(s=window.innerWidth,t.width=t.offsetWidth,t.heigh=t.offsetHeight,o.clearRect(0,0,t.offsetWidth,t.offsetHeight),a(o,r[e.index],0,0,t.width,t.height))}));let n={imagePos:0,imageOpacity:0},l=1,d=e.length-1;e.on("move",(function(t,o){e.root.classList.add("_moving"),e.options.drag=!1}));let c,p,h=gsap.timeline();const u=e.root.querySelector(".process__slider--arrow._prev"),g=e.root.querySelector(".process__slider--arrow._next");e.on("moved",(function(i,s){c&&clearTimeout(c),p&&clearTimeout(p),l=i+1>e.length-1?0:i+1,d=e.index-1==-1?e.length-1:e.index-1,setTimeout(()=>{if(h.pause(),h=gsap.timeline(),t.width=t.offsetWidth,t.height=t.offsetHeight,"next"==function(e,t,o){return e>t&&t!=o&&0!=e?0==t&&e==o?"prev":"next":t==o&&0==e?"next":"prev"}(i,s,e.length-1)){let d=Math.max(t.width,t.height);function l(e){o.clearRect(0,0,t.offsetWidth,t.offsetHeight),o.save(),a(o,r[s],e.imagePos,0,t.width,t.height),o.fillStyle=`rgba(0,0,0,${e.imageOpacity})`,o.rect(0,0,t.width,t.height),o.fill(),o.beginPath(),o.arc(e.clipPosX,t.height/2,d,0,2*Math.PI),o.clip(),a(o,r[i],0,0,t.width,t.height),o.restore()}g.classList.contains("_hover")||(n.clipPosX=d+t.width),e.root.classList.remove("_arrow-anim"),n.imagePos=0,n.imageOpacity=0,windowSize>550?h.to(n,{clipPosX:d-window.innerWidth/14,duration:.8,ease:"power4.inOut",onUpdate:function(e){l(n)}}):h.to(n,{clipPosX:d-t.width/3,duration:1,ease:"power4.inOut",onUpdate:function(e){l(n)}}),h.to(n,{imageOpacity:.5,duration:.6,onComplete:function(){n.imageOpacity=0},ease:"power4.inOut"},"-=0.7"),windowSize>550&&h.to(n,{duration:1,imagePos:-t.width/3,ease:"power4.inOut",onComplete:function(){n.imagePos=0}},"-=0.7")}else{let d=Math.max(t.width,t.height);function l(e){o.clearRect(0,0,t.offsetWidth,t.offsetHeight),o.save(),a(o,r[s],e.imagePos,0,t.width,t.height),o.fillStyle=`rgba(0,0,0,${e.imageOpacity})`,o.rect(0,0,t.width,t.height),o.fill(),o.beginPath(),o.arc(e.clipPosX,t.height/2,d,0,2*Math.PI),o.clip(),a(o,r[i],0,0,t.width,t.height),o.restore()}u.classList.contains("_hover")||(n.clipPosX=-d),e.root.classList.remove("_arrow-anim"),n.imagePos=0,n.imageOpacity=0,windowSize>550?h.to(n,{clipPosX:d-window.innerWidth/14,duration:.8,ease:"power4.inOut",onUpdate:function(e){l(n)},onComplete:function(){n.clipPosX=d}}):h.to(n,{clipPosX:-d+t.width+t.width/3,duration:1,ease:"power4.inOut",onUpdate:function(e){l(n)},onComplete:function(){n.clipPosX=d}}),h.to(n,{imageOpacity:.5,duration:.6,ease:"power4.inOut",onComplete:function(){n.imageOpacity=0}},"-=0.7"),windowSize>550&&h.to(n,{duration:1,imagePos:t.width/3,ease:"power4.inOut"},"-=0.5")}u.classList.remove("_hover"),g.classList.remove("_hover");const d=e.root.querySelector(".splide__slide.is-active"),c=e.root.querySelectorAll(".splide__slide:not(.is-active) .title.split-text .line-body, .splide__slide:not(.is-active) .text.split-text .line-body"),p=e.root.querySelectorAll(".splide__slide:not(.is-active) .min-marquee");setTimeout(()=>{window.innerWidth>550&&d==e.root.querySelector(".splide__slide.is-active")&&(gsap.set(c,{transform:"translate3d(0,120%,0.0001px)"}),gsap.to(d.querySelectorAll(".title.split-text .line-body"),{transform:"translate3d(0,0,0.0001px)",duration:.7,stagger:.07,onComplete:function(){gsap.set(c,{transform:"translate3d(0,120%,0.0001px)"})}}),gsap.to(d.querySelectorAll(".text.split-text .line-body"),{transform:"translate3d(0,0,0.0001px)",duration:.7,delay:.5,stagger:.07,onComplete:function(){gsap.set(c,{transform:"translate3d(0,120%,0.0001px)"})}}),gsap.to(d.querySelector(".min-marquee"),{opacity:1,duration:.7,delay:0}),gsap.set(p,{opacity:0}),gsap.set(c,{transform:"translate3d(0,120%,0.0001px)"})),gsap.set(e.root.querySelector(".splide__slide:not(.is-active) .min-marquee"),{opacity:0})},700),setTimeout(()=>{e.root.classList.remove("_moving")},windowSize>550?1500:500)},0)})),u.addEventListener("click",(function(){e.root.classList.contains("_moving")||e.go("<")})),g.addEventListener("click",(function(){e.root.classList.contains("_moving")||e.go(">")}));let m,f,w,y,_=document.querySelector("body");window.addEventListener("mousemove",e=>{m=e.target,f&&clearTimeout(f),f=setTimeout(()=>{_=e.target},200)}),u.addEventListener("pointerenter",(function(i){"desktop"==getDeviceType()&&(c&&clearTimeout(c),p&&clearTimeout(p),c=setTimeout(()=>{if(!u.classList.contains("_hover")&&!e.root.classList.contains("_moving")&&m.closest(".process__slider--arrow._prev")){y=!1,u.classList.add("_hover"),e.root.classList.add("_arrow-anim"),t.width=t.offsetWidth,t.height=t.offsetHeight;let s=Math.max(t.width,t.height);function i(i){o.clearRect(0,0,t.offsetWidth,t.offsetHeight),o.save(),a(o,r[e.index],0,0,t.width,t.height),o.fillStyle=`rgba(0,0,0,${i.imageOpacity})`,o.rect(0,0,t.width,t.height),o.fill(),o.beginPath(),o.arc(i.clipPosX,t.height/2,s,0,2*Math.PI),o.clip(),a(o,r[d],0,0,t.width,t.height),o.restore()}e.root.classList.contains("_moving")||(n.clipPosX=-s,i(n),setTimeout(()=>{e.root.classList.contains("_moving")||(n.clipPosX=-s,i(n),gsap.to(n,{clipPosX:-s+window.innerWidth/14,duration:.4,ease:"power4.inOut",onUpdate:function(e){i(n)},onComplete:function(){e.root.classList.add("_arrow-anim-end")}}))},100))}},y?400:100))})),u.addEventListener("pointerleave",(function(i){if(u.classList.contains("_hover")&&"desktop"==getDeviceType()&&!e.root.classList.contains("_moving")){w=!0,u.classList.remove("_hover"),t.width=t.offsetWidth,t.height=t.offsetHeight;let i=Math.max(t.width,t.height);function s(s){o.clearRect(0,0,t.offsetWidth,t.offsetHeight),o.save(),a(o,r[e.index],0,0,t.width,t.height),o.beginPath(),o.arc(s.clipPosX,t.height/2,i,0,2*Math.PI),o.clip(),a(o,r[d],0,0,t.width,t.height),o.restore()}s(n),gsap.to(n,{clipPosX:-i,duration:.4,ease:"power4.inOut",onUpdate:function(e){s(n)}})}})),g.addEventListener("pointerenter",(function(i){"desktop"==getDeviceType()&&(c&&clearTimeout(c),p&&clearTimeout(p),p=setTimeout(()=>{if(!g.classList.contains("_hover")&&!e.root.classList.contains("_moving")&&m.closest(".process__slider--arrow._next")){g.classList.add("_hover"),w=!1,t.width=t.offsetWidth,t.height=t.offsetHeight;let s=Math.max(t.width,t.height);function i(i){o.clearRect(0,0,t.offsetWidth,t.offsetHeight),o.save(),a(o,r[e.index],0,0,t.width,t.height),o.beginPath(),o.arc(i.clipPosX,t.height/2,s,0,2*Math.PI),o.clip(),a(o,r[l],0,0,t.width,t.height),o.restore()}e.root.classList.contains("_moving")||(n.clipPosX=s+t.width,i(n),e.root.classList.contains("_moving")||setTimeout(()=>{i(n),gsap.to(n,{clipPosX:2*s-window.innerWidth/14,duration:.4,ease:"power4.inOut",onUpdate:function(e){i(n)},onComplete:function(){e.root.classList.add("_arrow-anim-end")}})},100))}},w?400:100))})),g.addEventListener("pointerleave",(function(i){if(g.classList.contains("_hover")&&"desktop"==getDeviceType()&&!e.root.classList.contains("_moving")){g.classList.remove("_hover"),y=!0,t.width=t.offsetWidth,t.height=t.offsetHeight;let i=Math.max(t.width,t.height);function s(s){o.clearRect(0,0,t.offsetWidth,t.offsetHeight),o.save(),a(o,r[e.index],0,0,t.width,t.height),o.beginPath(),o.arc(s.clipPosX,t.height/2,i,0,2*Math.PI),o.clip(),a(o,r[l],0,0,t.width,t.height),o.restore()}s(n),gsap.to(n,{clipPosX:i+t.width,duration:.4,ease:"power4.inOut",onUpdate:function(e){s(n)}})}})),r[0].addEventListener("load",(function(e){setTimeout(()=>{t.width=t.offsetWidth,t.height=t.offsetHeight,o.clearRect(0,0,t.width,t.height),o.save(),a(o,r[0],0,0,t.width,t.height),o.restore()},500)})),i.forEach((e,t)=>{r[t].src=e.dataset.url})}setTimeout(()=>{ScrollTrigger.refresh(),smoother&&smoother.paused(!1)},100)},1e3)}}),preloadTimelineValue.to(preloadLoadingValue,{valueNumber:100,duration:.2,onUpdate:function(){progressLoaded.textContent=Math.round(preloadLoadingValue.valueNumber)}})},100)})),body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}const o=t(".header__burger");o&&(gsap.set(".header__nav--list > li > a .line-body",{transform:"translate3d(0,110%,0)"}),html.style.setProperty("--popup-padding",window.innerWidth-body.offsetWidth+"px"),menu.forEach(e=>{e.classList.toggle("_mob-menu-active")}),o.classList.contains("_mob-menu-active")&&gsap.to(".header__nav--list > li > a .line-body",{transform:"translate3d(0,0,0)",duration:1,stagger:.1,ease:"power4.out"}));const i=t(".header__nav--list a");i&&(e.preventDefault(),menu.forEach(e=>{e.classList.remove("_mob-menu-active")}),setTimeout(()=>{if(smoother)smoother.scrollTo(i.getAttribute("href"),!0,"top -150px"),gsap.set(".header__nav--list > li > a .line-body",{transform:"translate3d(0,110%,0)"});else{let e;e=document.querySelector(i.getAttribute("href")),e?e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}):body.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},200));const r=t(".misson__accordion--target");if(r){const e=r.closest(".misson__accordion--block"),t=e.querySelector(".misson__accordion--content"),o=t.querySelectorAll(".split-text .line-body");e.classList.contains("_active")?(e.classList.remove("_active"),smoother&&smoother.paused(!0),gsap.to(t,{height:0,marginTop:0,ease:"power4.out",onComplete:function(t){windowSize>=1e3&&(ScrollTrigger.refresh(),setTimeout(()=>{smoother&&smoother.paused(!1)},200)),e.classList.contains("_active")||gsap.set(o,{transform:"translate3d(0,120%,0.0002px)"})}})):(e.classList.add("_active"),smoother&&smoother.paused(!0),gsap.fromTo(t,{height:0,marginTop:0,ease:"circ.out"},{height:"auto",marginTop:windowSize>=1e3?"1.458333vw":"14px",ease:"power4.out",onComplete:function(e){windowSize>=1e3&&ScrollTrigger.refresh(),setTimeout(()=>{smoother&&smoother.paused(!1)},200)}}),gsap.to(o,{transform:"translate3d(0,0,0.0002px)",duration:.3,stagger:.05,ease:"power3.out"}))}}));let windowSize=0;function resize(){html.style.setProperty("--height-header",header.offsetHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize=window.innerWidth}resize(),window.addEventListener("resize",resize);