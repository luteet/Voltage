const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),header=document.querySelector(".header"),getDeviceType=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},imageBody=document.querySelectorAll(".image-body, figure");function runSplit(){document.querySelectorAll(".split-text").forEach(e=>{let t;t=new SplitType(e,{types:"lines"}),Array.from(t.lines).forEach(t=>{let a;a=t.cloneNode(!0),a.classList.remove("line"),a.classList.add("line-body"),e.classList.contains("_animated")&&(a.style.transform="translate3d(0,0,0)"),t.innerHTML="",t.append(a)}),e.style.opacity=1})}imageBody.forEach(e=>{const t=e.querySelector("img"),a=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==a.position&&(e.style.paddingTop=Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")}),gsap.registerPlugin(ScrollTrigger,ScrollSmoother),document.querySelectorAll(".split-text").forEach(e=>{e.style.opacity=0});class LoopingElement{constructor(e,t,a,o){this.element=e,this.currentTranslation=t,this.speed=a,this.direction=!0,this.scrollTop=0,this.metric=100,this.lerp={current:this.currentTranslation,target:this.currentTranslation,factor:.2},this.events(),this.render(),this.go=o}events(){window.addEventListener("scroll",e=>{let t=window.pageYOffset||document.documentElement.scrollTop;this.go?(this.direction=!0,this.lerp.target+=4*this.speed):(this.direction=!1,this.lerp.target-=4*this.speed),this.scrollTop=t<=0?0:t})}lerpFunc(e,t,a){this.lerp.current=e*(1-a)+t*a}goForward(){this.lerp.target+=this.speed,this.lerp.target>this.metric&&(this.lerp.current-=2*this.metric,this.lerp.target-=2*this.metric)}goBackward(){this.lerp.target-=this.speed,this.lerp.target<-this.metric&&(this.lerp.current-=2*-this.metric,this.lerp.target-=2*-this.metric)}animate(){this.direction?this.goForward():this.goBackward(),this.lerpFunc(this.lerp.current,this.lerp.target,this.lerp.factor),this.element.style.setProperty("--x",this.lerp.current+"%")}render(){this.animate(),window.requestAnimationFrame(()=>this.render())}}let smoother;const preloader=document.querySelector(".preloader"),preloaderBlock=preloader.querySelector(".preloader__block"),preloaderProgress=preloader.querySelector(".preloader__progress--value"),progressLoaded=preloader.querySelector(".preloader__loaded");let preloadLoadingValue={valueNumber:0},preloadTimeline=gsap.timeline(),preloadTimelineValue=gsap.timeline();document.addEventListener("DOMContentLoaded",(function(){gsap.set(preloaderProgress,{transform:"scaleX(0)"}),gsap.to(preloaderBlock,{opacity:1}),preloadTimeline.to(preloaderProgress,{transform:"scaleX(0.99)",duration:3,delay:.2}),preloadTimelineValue.to(preloadLoadingValue,{valueNumber:99,duration:3,delay:.2,onUpdate:function(){progressLoaded.textContent=Math.round(preloadLoadingValue.valueNumber)}})}));const processSliderImages=document.querySelectorAll(".process__bg-slider--image"),processSliderImagesArray=[];function drawImageProp(e,t,a,o,i,r,s,n){2===arguments.length&&(a=o=0,i=e.canvas.width,r=e.canvas.height),(s="number"==typeof s?s:.5)<0&&(s=0),(n="number"==typeof n?n:.5)<0&&(n=0),s>1&&(s=1),n>1&&(n=1);var c,l,d,p,h=t.width,g=t.height,m=Math.min(i/h,r/g),u=h*m,v=g*m,f=1;u<i&&(f=i/u),Math.abs(f-1)<1e-14&&v<r&&(f=r/v),(c=(h-(d=h/((u*=f)/i)))*s)<0&&(c=0),(l=(g-(p=g/((v*=f)/r)))*n)<0&&(l=0),d>h&&(d=h),p>g&&(p=g),e.drawImage(t,c,l,d,p,a,o,i,r)}function checkDirection(e,t,a){return e>t&&t!=a&&0!=e?0==t&&e==a?"prev":"next":t==a&&0==e?"next":"prev"}processSliderImages.forEach(e=>{const t=new Image;processSliderImagesArray.push(t)}),gsap.set(".process__bg-slider",{opacity:0});const canvas=document.querySelector(".process__bg-slider--canvas"),ctx=canvas.getContext("2d");window.addEventListener("load",(function(e){runSplit();const t=gsap.matchMedia();t.add("(min-width: 1000px)",()=>{smoother=ScrollSmoother.create({smooth:1.2,effects:!0})}),setTimeout(()=>{preloadTimeline.to(preloaderProgress,{transform:"scaleX(1)",duration:.2,onComplete:function(){preloaderBlock.classList.add("_hidden"),setTimeout(()=>{gsap.to(preloader,{opacity:0,duration:.4,onComplete:function(){preloader.remove()}})},400),setTimeout(()=>{t.add("(min-width: 1000px)",()=>{document.querySelectorAll(".parallax-image").forEach(e=>{gsap.set(e,{transform:"translate3d(0,-200px,0)",height:"calc(100% + 400px)",top:"-200px"}),gsap.to(e,{scrollTrigger:{scrub:!0,trigger:e.closest(".parallax-image-wrapper"),start:"top bottom",end:"bottom top"},transform:"translate3d(0,200px,0)",ease:"none"})})}),t.add("(max-width: 1000px)",()=>{gsap.set(".parallax-image",{transform:"translate3d(0,-100px,0)",height:"calc(100% + 200px)",top:"-100px"}),ScrollTrigger.config({ignoreMobileResize:!0}),gsap.to(".parallax-image",{scrollTrigger:{scrub:!0,trigger:".parallax-image-wrapper",start:"top bottom",end:"bottom top",ignoreMobileResize:!0},transform:"translate3d(0,100px,0)",ease:"none"})});let e=0;function a(){if(e!=window.innerWidth){e=window.innerWidth,runSplit();document.querySelectorAll(".anim-section").forEach(e=>{let t=gsap.timeline({scrollTrigger:{trigger:e,start:"top center"}});const a=e.querySelectorAll(".anim-text.split-text:not(._animated) .line-body");a[0]&&t.to(a,{transform:"translate3d(0,0,0)",duration:1,delay:.2,stagger:.15,ease:"power3.out",onComplete:function(){a[0].closest(".split-text")&&a[0].closest(".split-text").classList.add("_animated")}});const o=e.querySelectorAll(".anim-text-2.split-text:not(._animated) .line-body");o[0]&&t.to(o,{transform:"translate3d(0,0,0)",duration:.5,stagger:.1,ease:"power3.out",onComplete:function(){o[0].closest(".split-text")&&o[0].closest(".split-text").classList.add("_animated")}},"-=1.2");e.querySelectorAll(".fade-in").forEach(e=>{t.to(e,{duration:1,opacity:1,onComplete:function(){e.classList.add("_animated")}},"-=0.5")});e.querySelectorAll(".fade-down").forEach(e=>{t.to(e,{duration:1,opacity:1,transform:"translate3d(0,0,0)"},"-=0.5")})}),setTimeout(()=>{ScrollTrigger.refresh(!0)},100)}}a(),window.addEventListener("resize",a),document.querySelectorAll(".marquee__item").forEach(e=>{let t=e.querySelectorAll(".marquee__item--element"),a=Number(e.dataset.marqueeSpeed),o="false"!=e.dataset.marqueeGoNext;new LoopingElement(t[0],0,a,o),new LoopingElement(t[1],-100,a,o)});document.querySelectorAll("[data-append-marquee]").forEach(e=>{const t=document.createElement("div");t.innerHTML=`<span>${e.dataset.appendMarquee}</span><span>${e.dataset.appendMarquee}</span>`,t.classList.add("min-marquee"),t.classList.add("text"),e.append(t)});const o=document.querySelector(".blog__cursor"),i=document.querySelectorAll(".blog__item"),r=document.querySelector(".blog__wrapper");document.querySelector(".blog__list");let s=gsap.quickTo(o,"x",{duration:.3,ease:"power3"}),n=gsap.quickTo(o,"y",{duration:.3,ease:"power3"});if(r.addEventListener("pointermove",(function(e){"desktop"==getDeviceType()&&(s(e.clientX),n(e.clientY))})),r.addEventListener("pointerenter",(function(e){"desktop"==getDeviceType()&&(gsap.set(o,{x:e.clientX,duration:0,ease:"power3"}),gsap.set(o,{y:e.clientY,duration:0,ease:"power3"}),o.classList.add("_hover"))})),r.addEventListener("pointerleave",(function(e){o.classList.remove("_hover")})),i.forEach((e,t)=>{e.addEventListener("pointerenter",(function(a){"desktop"==getDeviceType()&&(o.dataset.index=t,e.classList.add("_hover"))}))}),document.querySelector(".process__bg-slider")&&document.querySelector(".process__slider")){const e=new Splide(".process__slider",{type:"fade",speed:600,waitForTransition:!0,pagination:!1,rewind:!0,arrows:!1,drag:!1});let t=0;e.on("mounted",(function(a){setTimeout(()=>{function a(){if(t!=window.innerWidth){t=window.innerWidth;e.root.querySelectorAll(".splide__slide.is-active .split-text").forEach(e=>{let t;t=new SplitType(e,{types:"lines"}),Array.from(t.lines).forEach(t=>{let a;a=t.cloneNode(!0),a.classList.remove("line"),a.classList.add("line-body"),e.classList.contains("_animated")&&(a.style.transform="translate3d(0,0,0)"),t.innerHTML="",t.append(a)}),e.style.opacity=1}),gsap.to(e.root.querySelectorAll(".splide__slide.is-active .title.split-text .line-body"),{scrollTrigger:{trigger:e.root,start:"top bottom"},transform:"translate3d(0,0,0.0001px)",duration:.7,stagger:.07}),gsap.to(e.root.querySelectorAll(".splide__slide.is-active .text.split-text .line-body"),{scrollTrigger:{trigger:e.root,start:"top bottom"},transform:"translate3d(0,0,0.0001px)",duration:.7,delay:.5,stagger:.07}),gsap.to(e.root.querySelector(".splide__slide.is-active .min-marquee"),{scrollTrigger:{trigger:e.root,start:"top bottom"},opacity:1,duration:.7,delay:.7})}}a(),window.addEventListener("resize",a)},500)})),e.mount();let a=window.innerWidth;window.addEventListener("resize",(function(t){a!=window.innerWidth&&(a=window.innerWidth,canvas.width=canvas.offsetWidth,canvas.heigh=canvas.offsetHeight,ctx.clearRect(0,0,canvas.offsetWidth,canvas.offsetHeight),drawImageProp(ctx,processSliderImagesArray[e.index],0,0,canvas.width,canvas.height))}));let o={imagePos:0,imageOpacity:0},i=1,r=e.length-1;e.on("move",(function(t,a){e.root.classList.add("_moving"),e.options.drag=!1}));let s,n,c=gsap.timeline();const l=e.root.querySelector(".process__slider--arrow._prev"),d=e.root.querySelector(".process__slider--arrow._next");e.on("moved",(function(t,a){s&&clearTimeout(s),n&&clearTimeout(n),i=t+1>e.length-1?0:t+1,r=e.index-1==-1?e.length-1:e.index-1,setTimeout(()=>{if(c.pause(),c=gsap.timeline(),canvas.width=canvas.offsetWidth,canvas.height=canvas.offsetHeight,"next"==checkDirection(t,a,e.length-1)){let r=Math.max(canvas.width,canvas.height);function i(e){ctx.clearRect(0,0,canvas.offsetWidth,canvas.offsetHeight),ctx.save(),drawImageProp(ctx,processSliderImagesArray[a],e.imagePos,0,canvas.width,canvas.height),ctx.fillStyle=`rgba(0,0,0,${e.imageOpacity})`,ctx.rect(0,0,canvas.width,canvas.height),ctx.fill(),ctx.beginPath(),ctx.arc(e.clipPosX,canvas.height/2,r,0,2*Math.PI),ctx.clip(),drawImageProp(ctx,processSliderImagesArray[t],0,0,canvas.width,canvas.height),ctx.restore()}d.classList.contains("_hover")||(o.clipPosX=r+canvas.width),e.root.classList.remove("_arrow-anim"),o.imagePos=0,o.imageOpacity=0,windowSize>650?c.to(o,{clipPosX:r-window.innerWidth/14,duration:.8,ease:"power4.inOut",onUpdate:function(e){i(o)}}):c.to(o,{clipPosX:r-canvas.width/2,duration:1,ease:"power4.inOut",onUpdate:function(e){i(o)}}),c.to(o,{imageOpacity:.5,duration:.6,onComplete:function(){o.imageOpacity=0},ease:"power4.inOut"},"-=0.7"),windowSize>650&&c.to(o,{duration:1,imagePos:-canvas.width/3,ease:"power4.inOut",onComplete:function(){o.imagePos=0}},"-=0.7")}else{let r=Math.max(canvas.width,canvas.height);function i(e){ctx.clearRect(0,0,canvas.offsetWidth,canvas.offsetHeight),ctx.save(),drawImageProp(ctx,processSliderImagesArray[a],e.imagePos,0,canvas.width,canvas.height),ctx.fillStyle=`rgba(0,0,0,${e.imageOpacity})`,ctx.rect(0,0,canvas.width,canvas.height),ctx.fill(),ctx.beginPath(),ctx.arc(e.clipPosX,canvas.height/2,r,0,2*Math.PI),ctx.clip(),drawImageProp(ctx,processSliderImagesArray[t],0,0,canvas.width,canvas.height),ctx.restore()}l.classList.contains("_hover")||(o.clipPosX=-r),e.root.classList.remove("_arrow-anim"),o.imagePos=0,o.imageOpacity=0,windowSize>650?c.to(o,{clipPosX:r-window.innerWidth/14,duration:.8,ease:"power4.inOut",onUpdate:function(e){i(o)},onComplete:function(){o.clipPosX=r}}):c.to(o,{clipPosX:-r+canvas.width+canvas.width/2,duration:1,ease:"power4.inOut",onUpdate:function(e){i(o)},onComplete:function(){o.clipPosX=r}}),c.to(o,{imageOpacity:.5,duration:.6,ease:"power4.inOut",onComplete:function(){o.imageOpacity=0}},"-=0.7"),windowSize>650&&c.to(o,{duration:1,imagePos:canvas.width/3,ease:"power4.inOut"},"-=0.5")}l.classList.remove("_hover"),d.classList.remove("_hover");const r=e.root.querySelector(".splide__slide.is-active"),s=e.root.querySelectorAll(".splide__slide:not(.is-active) .title.split-text .line-body, .splide__slide:not(.is-active) .text.split-text .line-body"),n=e.root.querySelectorAll(".splide__slide:not(.is-active) .min-marquee");setTimeout(()=>{window.innerWidth>650&&r==e.root.querySelector(".splide__slide.is-active")&&(gsap.set(s,{transform:"translate3d(0,120%,0.0001px)"}),gsap.to(r.querySelectorAll(".title.split-text .line-body"),{transform:"translate3d(0,0,0.0001px)",duration:.7,stagger:.07,onComplete:function(){gsap.set(s,{transform:"translate3d(0,120%,0.0001px)"})}}),gsap.to(r.querySelectorAll(".text.split-text .line-body"),{transform:"translate3d(0,0,0.0001px)",duration:.7,delay:.5,stagger:.07,onComplete:function(){gsap.set(s,{transform:"translate3d(0,120%,0.0001px)"})}}),gsap.set(s,{transform:"translate3d(0,120%,0.0001px)"})),gsap.to(r.querySelector(".min-marquee"),{opacity:1,duration:.7}),gsap.set(n,{opacity:0}),gsap.set(e.root.querySelector(".splide__slide:not(.is-active) .min-marquee"),{opacity:0})},700),setTimeout(()=>{e.root.classList.remove("_moving")},windowSize>650?1500:500)},0)})),l.addEventListener("click",(function(){e.root.classList.contains("_moving")||e.go("<")})),d.addEventListener("click",(function(){e.root.classList.contains("_moving")||e.go(">")}));let p,h,g,m,u=document.querySelector("body");window.addEventListener("mousemove",e=>{p=e.target,h&&clearTimeout(h),h=setTimeout(()=>{u=e.target},200)}),l.addEventListener("pointerenter",(function(t){"desktop"==getDeviceType()&&(s&&clearTimeout(s),n&&clearTimeout(n),s=setTimeout(()=>{if(!l.classList.contains("_hover")&&!e.root.classList.contains("_moving")&&p.closest(".process__slider--arrow._prev")){m=!1,l.classList.add("_hover"),e.root.classList.add("_arrow-anim"),canvas.width=canvas.offsetWidth,canvas.height=canvas.offsetHeight;let a=Math.max(canvas.width,canvas.height);function t(t){ctx.clearRect(0,0,canvas.offsetWidth,canvas.offsetHeight),ctx.save(),drawImageProp(ctx,processSliderImagesArray[e.index],0,0,canvas.width,canvas.height),ctx.fillStyle=`rgba(0,0,0,${t.imageOpacity})`,ctx.rect(0,0,canvas.width,canvas.height),ctx.fill(),ctx.beginPath(),ctx.arc(t.clipPosX,canvas.height/2,a,0,2*Math.PI),ctx.clip(),drawImageProp(ctx,processSliderImagesArray[r],0,0,canvas.width,canvas.height),ctx.restore()}e.root.classList.contains("_moving")||(o.clipPosX=-a,t(o),setTimeout(()=>{e.root.classList.contains("_moving")||(o.clipPosX=-a,t(o),gsap.to(o,{clipPosX:-a+window.innerWidth/14,duration:.4,ease:"power4.inOut",onUpdate:function(e){t(o)},onComplete:function(){e.root.classList.add("_arrow-anim-end")}}))},100))}},m?400:100))})),l.addEventListener("pointerleave",(function(t){if(l.classList.contains("_hover")&&"desktop"==getDeviceType()&&!e.root.classList.contains("_moving")){g=!0,l.classList.remove("_hover"),canvas.width=canvas.offsetWidth,canvas.height=canvas.offsetHeight;let t=Math.max(canvas.width,canvas.height);function a(a){ctx.clearRect(0,0,canvas.offsetWidth,canvas.offsetHeight),ctx.save(),drawImageProp(ctx,processSliderImagesArray[e.index],0,0,canvas.width,canvas.height),ctx.beginPath(),ctx.arc(a.clipPosX,canvas.height/2,t,0,2*Math.PI),ctx.clip(),drawImageProp(ctx,processSliderImagesArray[r],0,0,canvas.width,canvas.height),ctx.restore()}a(o),gsap.to(o,{clipPosX:-t,duration:.4,ease:"power4.inOut",onUpdate:function(e){a(o)}})}})),d.addEventListener("pointerenter",(function(t){"desktop"==getDeviceType()&&(s&&clearTimeout(s),n&&clearTimeout(n),n=setTimeout(()=>{if(!d.classList.contains("_hover")&&!e.root.classList.contains("_moving")&&p.closest(".process__slider--arrow._next")){d.classList.add("_hover"),g=!1,canvas.width=canvas.offsetWidth,canvas.height=canvas.offsetHeight;let a=Math.max(canvas.width,canvas.height);function t(t){ctx.clearRect(0,0,canvas.offsetWidth,canvas.offsetHeight),ctx.save(),drawImageProp(ctx,processSliderImagesArray[e.index],0,0,canvas.width,canvas.height),ctx.beginPath(),ctx.arc(t.clipPosX,canvas.height/2,a,0,2*Math.PI),ctx.clip(),drawImageProp(ctx,processSliderImagesArray[i],0,0,canvas.width,canvas.height),ctx.restore()}e.root.classList.contains("_moving")||(o.clipPosX=a+canvas.width,t(o),e.root.classList.contains("_moving")||setTimeout(()=>{t(o),gsap.to(o,{clipPosX:2*a-window.innerWidth/14,duration:.4,ease:"power4.inOut",onUpdate:function(e){t(o)},onComplete:function(){e.root.classList.add("_arrow-anim-end")}})},100))}},g?400:100))})),d.addEventListener("pointerleave",(function(t){if(d.classList.contains("_hover")&&"desktop"==getDeviceType()&&!e.root.classList.contains("_moving")){d.classList.remove("_hover"),m=!0,canvas.width=canvas.offsetWidth,canvas.height=canvas.offsetHeight;let t=Math.max(canvas.width,canvas.height);function a(a){ctx.clearRect(0,0,canvas.offsetWidth,canvas.offsetHeight),ctx.save(),drawImageProp(ctx,processSliderImagesArray[e.index],0,0,canvas.width,canvas.height),ctx.beginPath(),ctx.arc(a.clipPosX,canvas.height/2,t,0,2*Math.PI),ctx.clip(),drawImageProp(ctx,processSliderImagesArray[i],0,0,canvas.width,canvas.height),ctx.restore()}a(o),gsap.to(o,{clipPosX:t+canvas.width,duration:.4,ease:"power4.inOut",onUpdate:function(e){a(o)}})}})),processSliderImagesArray[0].addEventListener("load",(function(e){setTimeout(()=>{canvas.width=canvas.offsetWidth,canvas.height=canvas.offsetHeight,ctx.clearRect(0,0,canvas.width,canvas.height),ctx.save(),drawImageProp(ctx,processSliderImagesArray[0],0,0,canvas.width,canvas.height),ctx.restore()},0)})),processSliderImages.forEach((e,t)=>{processSliderImagesArray[t].src=e.dataset.url})}setTimeout(()=>{ScrollTrigger.refresh(!0),smoother&&smoother.paused(!1),gsap.to(".process__bg-slider",{opacity:1,duration:.5})},100)},1e3)}}),preloadTimelineValue.to(preloadLoadingValue,{valueNumber:100,duration:.2,onUpdate:function(){progressLoaded.textContent=Math.round(preloadLoadingValue.valueNumber)}})},100)})),body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}t(".header__burger")&&menu.forEach(e=>{e.classList.toggle("_mob-menu-active")});t(".header__nav--close")&&menu.forEach(e=>{e.classList.remove("_mob-menu-active")}),t(".header__nav")||t(".header__burger")||menu.forEach(e=>{e.classList.remove("_mob-menu-active")});const a=t(".header__nav--list a");a&&(e.preventDefault(),menu.forEach(e=>{e.classList.remove("_mob-menu-active")}),setTimeout(()=>{if(smoother)smoother.scrollTo(a.getAttribute("href"),!0,"top 50px");else{let e;e=document.querySelector(a.getAttribute("href")),e?e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}):body.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},200));const o=t(".misson__accordion--target");if(o){const e=o.closest(".misson__accordion--block"),t=e.querySelector(".misson__accordion--content"),a=t.querySelectorAll(".split-text .line-body");e.classList.contains("_active")?(e.classList.remove("_active"),gsap.to(t,{height:0,marginTop:0,ease:"power4.out",onComplete:function(t){windowSize>=1e3&&(ScrollTrigger.refresh(!0),setTimeout(()=>{},200)),e.classList.contains("_active")||gsap.set(a,{transform:"translate3d(0,120%,0.0002px)"})}})):(e.classList.add("_active"),gsap.fromTo(t,{height:0,marginTop:0,ease:"circ.out"},{height:"auto",marginTop:windowSize>=1e3?"1.458333vw":"14px",ease:"power4.out",onComplete:function(e){windowSize>=1e3&&ScrollTrigger.refresh(!0)}}),gsap.to(a,{transform:"translate3d(0,0,0.0002px)",duration:.3,stagger:.05,ease:"power3.out"}))}}));let windowSize=0;function resize(){html.style.setProperty("--height-header",header.offsetHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize=window.innerWidth}resize(),window.addEventListener("resize",resize);